webpackJsonp([39],{233:function(t,e,a){var i=a(6)(a(479),a(702),null,null);t.exports=i.exports},479:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a(65);e.default={name:"businessEdit",data:function(){return{noteStatus:!1,vuerifyStr:"",companyName:"",companyCountry:null,companyCity:"",companyDescription:"",cityId:"",companySize:"",companyType:"",yearFounded:"",website:"",field:[],fieldType:[],headUrl:""}},created:function(){this.$store.dispatch("countryAc"),this.$store.dispatch("fieldAc")},watch:{companyCountry:function(t,e){var a=this;this.$store.dispatch("cityAc",{id:t}).then(function(t){""===a.cityId?a.companyCity=t.data.cities[0].id:a.companyCity=a.cityId})}},vuerify:{companyName:{test:"required",message:"Please input company name"},companyCountry:{test:"required",message:"Please input country"},companyCity:{test:"required",message:"Please input city"},companyDescription:{test:"required",message:"Please select company description"},companySize:{test:"required",message:"Please select company size"},companyType:{test:"required",message:"Please select company type"},yearFounded:{test:/^\d{4}$/,message:"Please input the year your company was founded"}},computed:{errors:function(){return this.$vuerify.$errors},invalid:function(){return this.$vuerify.invalid},userInfo:function(){return this.$store.state.user.userInfo},countryList:function(){return this.$store.state.dict.countryList},citylist:function(){return this.$store.state.dict.citylist}},mounted:function(){var t=this;this.$store.dispatch("getUserInfoAc").then(function(e){t.headUrl=e.data.user.avatar,t.companyName=e.data.user.company_name,t.companyCountry=e.data.user.country.id,t.cityId=e.data.user.city.id,t.companyDescription=e.data.user.user_description,""==e.data.user.company_size?t.companySize=1:t.companySize=e.data.user.company_size,""==e.data.user.company_type?t.companyType=1:t.companyType=e.data.user.company_type,t.yearFounded=e.data.user.year_founded,t.website=e.data.user.homepage,t.field=e.data.user.fields,t.$store.state.dict.fieldList.forEach(function(e,a){t.fieldType.push(e)}),t.fieldType.forEach(function(e,a){t.field.forEach(function(t){e.id==t&&(e.status=!0)})})})},methods:{saveEdit:function(){var t=this;if(this.$vuerify.check())if(0==this.field.length)this.vuerifyStr="Please pick 1-3 which you are interested in",this.noteStatus=!0,setTimeout(function(){t.noteStatus=!1},1500);else{var e={company_name:this.companyName,country:this.companyCountry,city:this.companyCity,description:this.companyDescription,company_size:this.companySize,year_founded:this.yearFounded,company_type:this.companyType,homeid:this.website,fileds:this.field};this.$store.dispatch("userEdit",e).then(function(e){t.vuerifyStr=e.msg,t.noteStatus=!0,setTimeout(function(){if(t.noteStatus=!1,200===e.code){var a=t.$route.params.id;t.$store.dispatch("pageUsersAc",a),t.$router.push({name:"personalAbout",params:{id:a}})}},1500)})}else{var a=this.$vuerify.$errors,i=[];for(var s in a)i.push(a[s]);this.vuerifyStr=i[0],this.noteStatus=!0,setTimeout(function(){t.noteStatus=!1},1500)}},filedResult:function(t){var e=this,a=document.querySelectorAll("#pro-field span"),i=t.target.tagName.toLowerCase(),s=0,n=[];"span"===i&&("active"===t.target.className?t.target.className="":t.target.className="active",a.forEach(function(t,e){"active"==t.className&&s++}),s>3?(this.vuerifyStr="Pick 3 of your most skilled or interested model categories",this.noteStatus=!0,setTimeout(function(){e.noteStatus=!1},1500),t.target.className=""):(n.splice(n,n.length),a.forEach(function(t,e){"active"==t.className&&n.push(t.getAttribute("data-value"))}),this.field=n))},tirggerFile:function(t){var e=this,a=this,i=t.target.files[0],s=new FileReader;/image\/\w+/.test(i.type)?(s.addEventListener("load",function(){a.headUrl=s.result;var t={pic:a.headUrl,ext:i.type};a.$store.dispatch("editHeadPortraitAc",t).then(function(t){})},!1),s.readAsDataURL(i)):(this.vuerifyStr="please upload images",this.noteStatus=!0,setTimeout(function(){e.noteStatus=!1},1500))}}}},702:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"edit-container"},[i("form",{on:{submit:function(e){e.preventDefault(),t.saveEdit(e)}}},[t._m(0),t._v(" "),i("div",{staticClass:"padding-box clearfix"},[i("div",{staticClass:"head-portrait float-left position-relative"},[i("div",[i("img",{staticClass:"img-max",attrs:{src:t.headUrl}}),t._v(" "),i("div",{staticClass:"file-warp"},[i("input",{attrs:{type:"file"},on:{change:function(e){t.tirggerFile(e)}}}),t._v("\n                        Edit\n                    ")])]),t._v(" "),i("img",{staticClass:"user-status",attrs:{src:a(68)}})]),t._v(" "),i("div",{staticClass:"company-name float-left"},[i("p",{staticClass:"tag-title"},[t._v("Company name")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.companyName,expression:"companyName"}],attrs:{type:"text"},domProps:{value:t.companyName},on:{input:function(e){e.target.composing||(t.companyName=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"company-country float-left"},[i("p",{staticClass:"tag-title"},[t._v("Country")]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.companyCountry,expression:"companyCountry"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.companyCountry=e.target.multiple?a:a[0]}}},t._l(t.countryList,function(e){return i("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])}))]),t._v(" "),i("div",{staticClass:"company-city float-left"},[i("p",{staticClass:"tag-title"},[t._v("City")]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.companyCity,expression:"companyCity"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.companyCity=e.target.multiple?a:a[0]}}},t._l(t.citylist,function(e){return i("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])}))])]),t._v(" "),i("div",{staticClass:"padding-box"},[i("p",{staticClass:"tag-title"},[t._v("Company description")]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.companyDescription,expression:"companyDescription"}],attrs:{placeholder:"Say something about your , don't be shy!"},domProps:{value:t.companyDescription},on:{input:function(e){e.target.composing||(t.companyDescription=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"padding-box work-msg"},[i("ul",{staticClass:"flex"},[i("li",[i("p",{staticClass:"tag-title"},[t._v("Company size")]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.companySize,expression:"companySize"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.companySize=e.target.multiple?a:a[0]}}},[i("option",{attrs:{value:"1"}},[t._v("0-1 employees")]),t._v(" "),i("option",{attrs:{value:"2"}},[t._v("2-10 employees")]),t._v(" "),i("option",{attrs:{value:"3"}},[t._v("11-50 employees")]),t._v(" "),i("option",{attrs:{value:"4"}},[t._v("51-200 employees")]),t._v(" "),i("option",{attrs:{value:"5"}},[t._v("201-500 employees")]),t._v(" "),i("option",{attrs:{value:"6"}},[t._v("501-1000 employees")]),t._v(" "),i("option",{attrs:{value:"7"}},[t._v("1001-5000 employees")]),t._v(" "),i("option",{attrs:{value:"8"}},[t._v("5001-10000 employees")]),t._v(" "),i("option",{attrs:{value:"9"}},[t._v("10001+ employees")])])]),t._v(" "),i("li"),i("li",[i("p",{staticClass:"tag-title"},[t._v("Year founded")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.yearFounded,expression:"yearFounded"}],attrs:{type:"text"},domProps:{value:t.yearFounded},on:{input:function(e){e.target.composing||(t.yearFounded=e.target.value)}}})])]),t._v(" "),i("ul",{staticClass:"flex",staticStyle:{"margin-top":"28px"}},[i("li",[i("p",{staticClass:"tag-title"},[t._v("Company type")]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.companyType,expression:"companyType"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.companyType=e.target.multiple?a:a[0]}}},[i("option",{attrs:{value:"1"}},[t._v("Public company")]),t._v(" "),i("option",{attrs:{value:"2"}},[t._v("Educational institute")]),t._v(" "),i("option",{attrs:{value:"3"}},[t._v("Self-employed")]),t._v(" "),i("option",{attrs:{value:"4"}},[t._v("Non-profit")]),t._v(" "),i("option",{attrs:{value:"5"}},[t._v("Sole proprietorship")]),t._v(" "),i("option",{attrs:{value:"6"}},[t._v("Privately held")]),t._v(" "),i("option",{attrs:{value:"7"}},[t._v("partnership")])])]),t._v(" "),i("li",[i("p",{staticClass:"tag-title"},[t._v("Website")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.website,expression:"website"}],attrs:{type:"text",placeholder:"example:https://www.google.com"},domProps:{value:t.website},on:{input:function(e){e.target.composing||(t.website=e.target.value)}}})])])]),t._v(" "),i("div",{staticClass:"padding-box"},[i("p",{staticClass:"tag-title"},[t._v("Please pick 3 specialities")]),t._v(" "),i("div",{staticClass:"pro-field",attrs:{id:"pro-field"},on:{click:function(e){t.filedResult(e)}}},t._l(t.fieldType,function(e){return i("span",{class:{active:e.status},attrs:{"data-value":e.id}},[t._v(t._s(e.name))])}))])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.noteStatus,expression:"noteStatus"}],staticClass:"form-note"},[t._v(t._s(t.vuerifyStr))])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"text-right"},[a("button",{staticClass:"save-btn btn-default btn",attrs:{type:"submit"}},[t._v("Save")])])}]}}});
//# sourceMappingURL=39.dd0b92060329c9631883.js.map